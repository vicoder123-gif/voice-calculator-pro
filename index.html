<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>StudyCalc â€“ Real-time Voice Hover</title>
<style>
  * { 
    box-sizing:border-box; 
    font-family:Arial,sans-serif; 
    margin:0; 
    padding:0; 
  }
  
  body { 
    background:#0f172a; 
    color:#fff; 
    display:flex; 
    justify-content:center; 
    align-items:center; 
    min-height:100vh; 
  }
  
  .calculator { 
    background:#1e293b; 
    width:100%; 
    max-width:360px; 
    padding:20px; 
    border-radius:16px; 
    text-align:center; 
  }
  
  h1 { 
    margin:5px 0; 
    font-size:24px; 
  }
  
  .tagline { 
    font-size:14px; 
    color:#94a3b8; 
    margin-bottom:15px; 
  }

  #input { 
      width:100%; 
      padding:40px; 
      border-radius:8px; 
      border:none; 
      font-size:18px; 
      text-align:right; 
      margin-bottom:15px; 
      background:#ffffff; 
      color:#f10000;
      border: 3px solid;
      border-color: #966805; 
      font-size: 20px;
      font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
    }

  #result { 
    font-size:16px; 
    color:#cbd5f5; 
    min-height:20px; 
    margin-bottom:10px; 
  }

  .mic-btn {
    width:100%;
    padding:14px;
    font-size:18px;
    border:2px solid;
    border-radius:10px;
    border-color: #966805;
    color:#000;
    cursor:pointer;
    background:#22c55e;
    transition:0.3s;
    display: flex;
    justify-content: center;
    font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
  }

  .mic-active {
    animation: gradient-border 2s linear infinite;
  }

  @keyframes gradient-border {
    0% { border-image: linear-gradient(45deg, #22c55e, #3b82f6, #facc15, #ef4444) 1; }
    50% { border-image: linear-gradient(135deg, #22c55e, #3b82f6, #facc15, #ef4444) 1; }
    100% { border-image: linear-gradient(225deg, #22c55e, #3b82f6, #facc15, #ef4444) 1; }
  }

  .buttons { 
    display:grid; 
    grid-template-columns:repeat(4,1fr); 
    gap:10px; 
    margin-bottom:20px; 
  }
  
  .btn { 
    padding:20px; 
    font-size:18px; 
    border:none; 
    border-radius:10px; 
    background:#334155; 
    color:#fff; 
    border-color: 2px solid white;
    cursor:pointer; 
    transition:0.2s; 
  }

  .btn:hover, .btn.active { 
    background:#22c55e; 
    color:#000; 
  }

  .examples { 
    font-size:13px; 
    color:#cbd5f5; 
  }

  .examples span { 
    display:block; 
    margin-top:4px; }
</style>
</head>
<body>

<div class="calculator">
  <h1>ðŸŽ“ <br> Voice-calculator</h1>
  <p class="tagline">Real-time Voice + Buttons</p>

  <input type="text" id="input" placeholder="Result appears here" readonly>
  <button class="mic-btn" id="micBtn">Tap to Allow Mic</button>
  <div id="result"></div>

  <div class="buttons">
    <button class="btn" onclick="press('7')">7</button>
    <button class="btn" onclick="press('8')">8</button>
    <button class="btn" onclick="press('9')">9</button>
    <button class="btn" onclick="press('/')">/</button>

    <button class="btn" onclick="press('4')">4</button>
    <button class="btn" onclick="press('5')">5</button>
    <button class="btn" onclick="press('6')">6</button>
    <button class="btn" onclick="press('*')">*</button>

    <button class="btn" onclick="press('1')">1</button>
    <button class="btn" onclick="press('2')">2</button>
    <button class="btn" onclick="press('3')">3</button>
    <button class="btn" onclick="press('-')">-</button>

    <button class="btn" onclick="press('0')">0</button>
    <button class="btn" onclick="press('.')">.</button>
    <button class="btn" onclick="calculate()">=</button>
    <button class="btn" onclick="press('+')">+</button>

    <button class="btn" 
    style="grid-column: span 4; 
    background:#ef4444;" onclick="clearInput()">Delete</button>
  </div>
</div>

<script>
  const inputBox = document.getElementById("input");
  const resultDiv = document.getElementById("result");
  const buttons = document.querySelectorAll(".btn");
  const micBtn = document.getElementById("micBtn");

  function press(value){ inputBox.value += value; }
  function clearInput(){ inputBox.value = ""; resultDiv.innerText = ""; }
  function calculate(){
    try{
      let result = eval(inputBox.value);
      inputBox.value = result;
      resultDiv.innerText = "âœ… Answer shown above";
      speechSynthesis.speak(new SpeechSynthesisUtterance("Answer is " + result));
    } catch{
      resultDiv.innerText = "âŒ Invalid expression";
      speechSynthesis.speak(new SpeechSynthesisUtterance("Sorry, invalid expression"));
    }
  }

  // Voice recognition
  const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
  const recognition = new SpeechRecognition();
  recognition.lang = "en-IN";
  recognition.continuous = true;
  recognition.interimResults = true; // âœ… Real-time results

  const wordMap = {
    "plus":"+","minus":"-","into":"*","multiply by":"*","times":"*","divide by":"/",
    "jod":"+","ghata":"-","guna":"*","bhag":"/",
    "0":"0","1":"1","2":"2","3":"3","4":"4","5":"5","6":"6","7":"7","8":"8","9":"9"
  };

  // Start listening after user allows mic
  micBtn.addEventListener("click", ()=>{
    micBtn.classList.add("mic-active");
    micBtn.innerText = "ðŸŽ¤ Listening...";
    recognition.start();
  });

  recognition.onresult = function(event){
    // Get last interim result for real-time hover
    let transcript = '';
    for(let i=event.resultIndex; i<event.results.length; i++){
      transcript += event.results[i][0].transcript.toLowerCase();
    }

    let words = transcript.trim().split(" ");
    let lastWord = words[words.length - 1];

    // Remove previous highlights
    buttons.forEach(btn => btn.classList.remove("active"));

    let val = wordMap[lastWord];
    if(val){
      let btn = Array.from(buttons).find(b=>b.innerText===val);
      if(btn) btn.classList.add("active");
    }

    // Replace words with symbols for calculation
    let expr = transcript;
    for(let key in wordMap){
      expr = expr.replace(new RegExp(key, "g"), wordMap[key]);
    }

    try{
      let result = eval(expr);
      inputBox.value = result;
    } catch{
      // Ignore invalid intermediate expressions
    }
  };

  recognition.onend = function(){
    recognition.start(); // Auto-restart for continuous listening
  };
</script>

</body>
</html>
